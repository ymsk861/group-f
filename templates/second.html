<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <meta http-equiv="refresh" content="10; URL=/">
        <title>Document</title>
        <title>team-f</title>
        <style type="text/css">
        p{
            color: red;
            font-size: 20px;
        }
        </style>
    <body>
        <h1><em>カメラから表情を読み取り感情を予想し円グラフにします</em></h1>
        <hr>
        <h3>現在の円グラフ(約10秒ごとに更新されます)</h3>
        <!-- 最上位の感情と割合 -->
        {{ em[0][0] }}が {{ em[1][0]|round(2) }}％です
        
        <span id="view_time"></span>
<script type="text/javascript">
document.getElementById("view_time").innerHTML = getNow();
function getNow() {
  var now = new Date();
  var year = now.getFullYear();
  var mon = now.getMonth()+1; //１を足すこと
  var day = now.getDate();
  var hour = now.getHours();
  var min = now.getMinutes();
  var sec = now.getSeconds();
  //出力用
  var s = year + "年" + mon + "月" + day + "日" + hour + "時" + min + "分" + sec + "秒";
  return s;
}
</script>
  <canvas id="myPieChart"></canvas>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
  <script>
  
  // flaskから受け取った変数を反映
  let em_type_js = {{ em[0] | tojson }};
  let em_conf_js = {{ em[1] | tojson }};


  var ctx = document.getElementById("myPieChart");
  var myPieChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: [em_type_js[0], em_type_js[1], em_type_js[2], em_type_js[3], em_type_js[4], em_type_js[5], em_type_js[6], em_type_js[7]],
      datasets: [{
          backgroundColor: [
              "#07EBEB",
              "#BB5179",
              "#58A27C",
              "#3C00FF",
              "#FAFF67",
              "#CCB876",
              "#EB1212"
          ],
          data: [em_conf_js[0], em_conf_js[1], em_conf_js[2], em_conf_js[3], em_conf_js[4], em_conf_js[5], em_conf_js[6], em_conf_js[7]]　//数値指定
      }]
    },
    options: {
      title: {
        display: true,
        text: '感情予想'
      }
    }
  });
  </script>
    <P>注意:カメラが起動中です.</P>
    </body>
</html>
